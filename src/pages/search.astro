---
import PageLayout from "@/layouts/PageLayout.astro";
import PagefindUI from "astro-pagefind/components/Search";
---

<PageLayout title="搜索" titleShow={false} asideCards={['CardInfo','CardCategroies','CardTagCloud','CardToolbar']}>
  <PagefindUI id="search" className="pagefind-ui" uiOptions={{ showImages: false }} query="" />
</PageLayout>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const input = document.querySelector<HTMLInputElement>('#search input')!
    input.value = new URLSearchParams(location.search).get('q') || ''
    input.dispatchEvent(new Event("input", { bubbles: true }));
  });
</script>

<style is:global>
.dark .pagefind-ui {
  --pagefind-ui-primary: var(--colors-gradientBlue-middle)!important;
  --pagefind-ui-text: var(--colors-textPrim)!important;
  --pagefind-ui-background: var(--colors-global)!important;
  --pagefind-ui-border: var(--colors-textPrim)!important;
  --pagefind-ui-font: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Lato, Roboto, 'PingFang SC', 'Microsoft YaHei', sans-serif;
}

.pagefind-ui__result-thumb, .pagefind-ui__search-clear {
  display: none!important;
}
</style>